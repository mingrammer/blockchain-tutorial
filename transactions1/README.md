# Part 4. íŠ¸ëœì­ì…˜ 1

## ì†Œê°œ

íŠ¸ëœì­ì…˜ì€ ë¹„íŠ¸ì½”ì¸ì˜ í•µì‹¬ì´ë©° ë¸”ë¡ì²´ì¸ì˜ ìœ ì¼í•œ ëª©ì ì€ íŠ¸ëœì­ì…˜ì„ ì•ˆì „í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°©ì‹ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— íŠ¸ëœì­ì…˜ì´ ìƒì„±ë˜ë©´ ê·¸ ëˆ„êµ¬ë„ ì´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤. ì´ë²ˆ íŒŒíŠ¸ì—ì„œëŠ” íŠ¸ëœì­ì…˜ì„ êµ¬í˜„í•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŠ” ê½¤ í° ì£¼ì œì´ê¸° ë•Œë¬¸ì— ë‘ íŒŒíŠ¸ë¡œ ë‚˜ëˆŒ ê²ƒì´ë‹¤. ì´ íŒŒíŠ¸ì—ì„œëŠ” ì¼ë°˜ì ì¸ íŠ¸ëœì­ì…˜ ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í•  ê²ƒì´ë©° ë‘ ë²ˆì§¸ íŒŒíŠ¸ì—ì„œëŠ” ì¢€ ë” ìì„¸í•œ ë‚´ìš©ì„ ë‹¤ë£° ê²ƒì´ë‹¤.

ì½”ë“œì˜ ìˆ˜ì •ì‚¬í•­ ë˜í•œ ë§ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œ ëª¨ë“  ì½”ë“œë¥¼ ë³´ì—¬ì£¼ì§„ ì•ŠëŠ”ë‹¤. ì „ì²´ ì½”ë“œ ìˆ˜ì •ì‚¬í•­ì€ [ì—¬ê¸°](https://github.com/Jeiwan/blockchain_go/compare/part_3...part_4#files_bucket)ì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤.

## ìˆŸê°€ë½ì€ ì—†ë‹¤ (There is no spoon)

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•´ë´¤ë‹¤ë©´ ê²°ì œë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ DBì— **accounts**ì™€ **transactions**ë¼ëŠ” í…Œì´ë¸”ì„ ìƒì„±í•´ë´¤ì„ ê²ƒì´ë‹¤. accountëŠ” ê°œì¸ì •ë³´ì™€ ì”ê³ ë¥¼ í¬í•¨í•˜ëŠ” ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ë©° transactionsëŠ” ê³„ì¢Œê°„ ì´ì²´ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤. ë¹„íŠ¸ì½”ì¸ì—ì„œëŠ” ê²°ì œë¥¼ ì™„ì „íˆ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê³ ìˆë‹¤. ë¹„íŠ¸ì½”ì¸ì—ëŠ”

1. ê³„ì¢Œê°€ ì—†ë‹¤.
2. ì”ê³ ê°€ ì—†ë‹¤.
3. ì£¼ì†Œê°€ ì—†ë‹¤.
4. ì½”ì¸ì´ ì—†ë‹¤.
5. ì†¡ìˆ˜ì‹ ìê°€ ì—†ë‹¤.

ë¸”ë¡ì²´ì¸ì€ ê³µê°œëœ ë°ì´í„°ë² ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— ì§€ê°‘ ì†Œìœ ìì— ëŒ€í•œ ë¯¼ê°í•œ ì •ë³´ëŠ” ì €ì¥í•˜ê³ ì‹¶ì§€ ì•Šë‹¤. ì½”ì¸ì€ ê³„ì¢Œì— ìˆ˜ì§‘ë˜ì§€ ì•ŠëŠ”ë‹¤. íŠ¸ëœì­ì…˜ì€ í•œ ì£¼ì†Œì—ì„œ ë‹¤ë¥¸ ì£¼ì†Œë¡œ ëˆì„ ì´ì²´í•˜ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ ê³„ì¢Œ ì”ê³ ë¥¼ ì €ì¥í•˜ëŠ” í•„ë“œë‚˜ ì†ì„±ê°’ ë˜í•œ ì—†ë‹¤. ì˜¤ë¡œì§€ íŠ¸ëœì­ì…˜ë§Œì´ ì¡´ì¬í•œë‹¤. ê·¸ëŸ¼ íŠ¸ëœì­ì…˜ ì•ˆì—ëŠ” ë¬´ì—‡ì´ ìˆì„ê¹Œ?

## ë¹„íŠ¸ì½”ì¸ íŠ¸ëœì­ì…˜

íŠ¸ëœì­ì…˜ì€ ì…ë ¥ê³¼ ì¶œë ¥ì˜ ì¡°í•©ì´ë‹¤.

```go
type Transaction struct {
        ID   []byte
        Vin  []TXInput
        Vout []TXOutput
}
```

ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì˜ ì…ë ¥ì€ ì´ì „ íŠ¸ëœì­ì…˜ì˜ ì¶œë ¥ì„ ì°¸ì¡°í•œë‹¤ (ì˜ˆì™¸ë„ ì¡´ì¬í•˜ì§€ë§Œ ì´ëŠ” ë‚˜ì¤‘ì— ì‚´í´ë³¼ ê²ƒì´ë‹¤). ì¶œë ¥ì€ ì½”ì¸ì´ ì‹¤ì œë¡œ ì €ì¥ë˜ëŠ” ê³³ì´ë‹¤. ë‹¤ìŒ ë‹¤ì´ì–´ê·¸ë¨ì€ íŠ¸ëœì­ì…˜ê°„ì˜ ìƒí˜¸ì—°ê²°ì„ ë³´ì—¬ì¤€ë‹¤.

![Transaction Diagram](../images/transactions-diagram.png)

ìœ„ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ ë‹¤ìŒì„ ë³¼ ìˆ˜ ìˆë‹¤.

1. ì…ë ¥ê³¼ ì—°ê²°ë˜ì§€ ì•Šì€ ì¶œë ¥ì´ ì¡´ì¬í•œë‹¤.
2. í•œ íŠ¸ëœì­ì…˜ì˜ ì…ë ¥ì€ ì—¬ëŸ¬ íŠ¸ëœì­ì…˜ì˜ ì¶œë ¥ì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.
3. ì…ë ¥ì€ ë°˜ë“œì‹œ ì¶œë ¥ì„ ì°¸ì¡°í•´ì•¼í•œë‹¤.

ì´ ê¸€ì—ì„œ ìš°ë¦¬ëŠ” "ëˆ (money)", "ì½”ì¸ (coins)", "ì†Œë¹„ (spend)", "ì „ì†¡ (send)" ê·¸ë¦¬ê³  "ê³„ì¢Œ (account)"ë“±ê³¼ ê°™ì€ ìš©ì–´ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ ë¹„íŠ¸ì½”ì¸ì—ëŠ” ì´ëŸ¬í•œ ê°œë…ë“¤ì´ ì—†ë‹¤. íŠ¸ëœì­ì…˜ì€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ ê°’ì„ ì ê·¸ê¸°ë§Œ í•˜ë©°, ìŠ¤í¬ë¦½íŠ¸ë¡œ ì ê·¼ ì‚¬ëŒë§Œ ì ê¸ˆì„ í•´ì œí•  ìˆ˜ ìˆë‹¤.

## íŠ¸ëœì­ì…˜ ì¶œë ¥

íŠ¸ëœì­ì…˜ ì¶œë ¥ë¶€í„° ì‚´í´ë³´ì.

```go
type TXOutput struct {
        Value        int
        ScriptPubKey string
}
```

ì‹¤ì œë¡œ ì´ ì¶œë ¥ì€ "ì½”ì¸"ì„ ì €ì¥í•œë‹¤ (**Value** í•„ë“œë¥¼ ë³´ì•„ë¼). ê·¸ë¦¬ê³  ì €ì¥ì´ë€ **ScriptPubKey**ì— ì €ì¥ë˜ì–´ìˆëŠ” ì•”í˜¸ë¡œ ê°’ì„ ì ê·¸ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ë¹„íŠ¸ì½”ì¸ì€ ë‚´ë¶€ì ìœ¼ë¡œ ì¶œë ¥ ì ê¸ˆê³¼ ë¡œì§ í•´ì œë¥¼ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” *Script*ë¼ëŠ” ìŠ¤í¬ë¦½íŒ… ì–¸ì–´ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ì–¸ì–´ëŠ” ì•„ì£¼ ì›ì‹œì ì´ì§€ë§Œ (í•´í‚¹ê³¼ ì˜ëª»ëœ ì‚¬ìš©ì„ í”¼í•˜ê¸°ìœ„í•´ ì˜ë„ëœ ì„¤ê³„ì´ë‹¤), ì—¬ê¸°ì„œ ìì„¸íˆ ë…¼ì˜í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ìì„¸í•œ ì„¤ëª…ì€ [ì—¬ê¸°](https://en.bitcoin.it/wiki/Script)ì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤.

> ë¹„íŠ¸ì½”ì¸ì—ì„œ *ê°’ (value)* í•„ë“œëŠ” BTCì˜ ê°œìˆ˜ê°€ ì•„ë‹Œ *ì‚¬í† ì‹œ (satoshis)*ì˜ ê°œìˆ˜ë¥¼ ì €ì¥í•œë‹¤. *ì‚¬í† ì‹œ (satoshis)*ëŠ” 1ì–µë¶„ì˜ 1 ë¹„íŠ¸ì½”ì¸ (0.00000001 BTC)ì´ë©° ë¹„íŠ¸ì½”ì¸ì˜ ìµœì†Œ í™”í ë‹¨ìœ„ì´ë‹¤ (ì„¼íŠ¸ì™€ ìœ ì‚¬í•˜ë‹¤).

í˜„ì¬ëŠ” êµ¬í˜„ëœ ì£¼ì†Œê°€ ì—†ê¸° ë•Œë¬¸ì— ì´ì™€ ê´€ë ¨ëœ ì „ì²´ ë¡œì§ì„ ìŠ¤í¬ë¦½íŒ…í•˜ì§„ ì•Šì„ ê²ƒì´ë‹¤. **ScriptPubKey**ëŠ” ì„ì˜ì˜ ë¬¸ìì—´ì„ ì €ì¥í•œë‹¤ (ì‚¬ìš©ì ì •ì˜ ì§€ê°‘ ì£¼ì†Œ).

> ê·¸ëŸ°ë°, ìŠ¤í¬ë¦½íŒ… ì–¸ì–´ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ”ê±´ ë¹„íŠ¸ì½”ì¸ ë˜í•œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ í”Œë«í¼ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•œë‹¤.

ì¶œë ¥ì— ëŒ€í•œ ì¤‘ìš”í•œì  ì¤‘ í•˜ë‚˜ëŠ” ë¶„ë¦¬ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, ê°’ì˜ ì¼ë¶€ë§Œ ì°¸ì¡°í•  ìˆ˜ëŠ” ì—†ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ì¶œë ¥ì´ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì—ì„œ ì°¸ì¡°ë˜ë©´ ì¶œë ¥ì˜ ì „ì²´ê°€ ëª¨ë‘ ì†Œë¹„ëœë‹¤. ê·¸ë¦¬ê³  ì´ ê°’ì´ í•„ìš”í•œ ê°’ë³´ë‹¤ í° ê²½ìš°ì—ëŠ”, ì”ì•¡ì´ ë§Œë“¤ì–´ì§€ë©° ì´ëŠ” ë³´ë‚¸ ì‚¬ëŒì—ê²Œ ë‹¤ì‹œ ì „ì†¡ëœë‹¤. ì´ëŠ” ì‹¤ìƒí™œì—ì„œ $1ì˜ ë¬¼ê±´ì„ êµ¬ë§¤í•˜ê¸°ìœ„í•´ $5ë¥¼ ì§€ë¶ˆí•˜ë©´ $4ì˜ ì”ì•¡ì´ ë‚¨ëŠ” ìƒí™©ê³¼ ìœ ì‚¬í•˜ë‹¤.

## íŠ¸ëœì­ì…˜ ì…ë ¥

ì…ë ¥ êµ¬ì¡°ì²´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```go
type TXInput struct {
        Ixid      []byte
        Vout      int
        ScriptSig string
}
```

ì´ì „ì—ë„ ì–¸ê¸‰í–ˆë“¯ì´ ì…ë ¥ì€ ì´ì „ ì¶œë ¥ì„ ì°¸ì¡°í•œë‹¤. **Txid**ëŠ” í•´ë‹¹ íŠ¸ëœì­ì…˜ì˜ IDë¥¼ ì €ì¥í•˜ê³  **Vout**ì€ íŠ¸ëœì­ì…˜ì˜ ì¶œë ¥ ì¸ë±ìŠ¤ë¥¼ ì €ì¥í•œë‹¤. **ScriptSig**ëŠ” ì¶œë ¥ì˜ **ScriptPubKey**ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì´ë‹¤. ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ë©´ ì¶œë ¥ì˜ ì ê¸ˆì„ í•´ì œí•  ìˆ˜ ìˆìœ¼ë©° ì¶œë ¥ì˜ ê°’ (Value)ì„ ì‚¬ìš©í•´ ìƒˆë¡œìš´ ì¶œë ¥ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ì— í•´ë‹¹ ì¶œë ¥ì€ ì…ë ¥ì—ì„œ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤. ì´ ë©”ì»¤ë‹ˆì¦˜ì€ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì†Œìœ í•œ ì½”ì¸ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒì„ ë³´ì¥í•´ì¤€ë‹¤.

ë˜ ë‹¤ì‹œ, í˜„ì¬ëŠ” êµ¬í˜„ëœ ì£¼ì†Œê°€ ì—†ê¸° ë•Œë¬¸ì— **ScriptSig**ëŠ” ì„ì˜ì˜ ì‚¬ìš©ì ì •ì˜ ì§€ê°‘ ì£¼ì†Œë¥¼ ì €ì¥í•  ê²ƒì´ë‹¤. í¼ë¸”ë¦­ í‚¤ì™€ ì‹œê·¸ë‹ˆì²˜ ê²€ì¦ì€ ë‹¤ìŒ íŒŒíŠ¸ì—ì„œ êµ¬í˜„í•  ê²ƒì´ë‹¤.

ì´ì œ ë‚´ìš©ì„ ìš”ì•½í•´ë³´ì. "ì½”ì¸"ì€ ì¶œë ¥ì— ì €ì¥ëœë‹¤. ê° ì¶œë ¥ì—ëŠ” ì ê¸ˆ í•´ì œ ë¡œì§ì„ ê²°ì •í•˜ëŠ” ì ê¸ˆ í•´ì œ ìŠ¤í¬ë¦½íŠ¸ê°€ í•¨ê»˜ ì œê³µëœë‹¤. ëª¨ë“  ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì€ ë°˜ë“œì‹œ ì ì–´ë„ í•˜ë‚˜ì˜ ì…ë ¥ê³¼ ì¶œë ¥ì„ ê°€ì§„ë‹¤. ì…ë ¥ì€ ì´ì „ íŠ¸ëœì­ì…˜ì˜ ì¶œë ¥ì„ ì°¸ì¡°í•˜ê³  ì ê¸ˆ í•´ì œë¥¼ ìœ„í•´ ì¶œë ¥ì˜ ì ê¸ˆ í•´ì œì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„° (**ScriptSig** í•„ë“œ)ë¥¼ ì œê³µí•˜ë©° ì´ ê°’ì„ ì‚¬ìš©í•´ ìƒˆë¡œìš´ ì¶œë ¥ì„ ìƒì„±í•œë‹¤.

ê·¸ëŸ°ë° ì–´ë–¤ê²Œ ë¨¼ì €ì¼ê¹Œ? ì…ë ¥? ì¶œë ¥?

## ë‹¬ê±€

ë¹„íŠ¸ì½”ì¸ì—ì„œëŠ” ë‹­ë³´ë‹¤ ë‹¬ê±€ì´ ë¨¼ì €ë‹¤. ì…ì¶œë ¥ ë¡œì§ì€ ê³ ì „ì ì¸ "ë‹­ì´ ë¨¼ì €ëƒ ë‹¬ê±€ì´ ë¨¼ì €ëƒ"ì˜ ë¬¸ì œì™€ ê°™ë‹¤. ì…ë ¥ì´ ì¶œë ¥ì„ ìƒì„±í•˜ê³  ì¶œë ¥ì€ ì…ë ¥ì„ ê°€ëŠ¥í•˜ê²Œí•œë‹¤. ê·¸ë¦¬ê³  ë¹„íŠ¸ì½”ì¸ì—ì„œëŠ” ì…ë ¥ë³´ë‹¤ ì¶œë ¥ì´ ë¨¼ì €ë‹¤.

ì±„êµ´ìê°€ ë¸”ë¡ ì±„êµ´ì„ ì‹œì‘í•˜ë©´ ì´ëŠ” **ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜**ì— ì¶”ê°€ëœë‹¤. ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì€ íŠ¹ìˆ˜í•œ íƒ€ì…ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì´ì „ ì¶œë ¥ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” ì•„ë¬´ê²ƒë„ ì—†ëŠ” ìƒíƒœì—ì„œ ("ì½”ì¸"ë“±ì˜) ì¶œë ¥ì„ ìƒì„±í•œë‹¤. ë‹­ ì—†ëŠ” ë‹¬ê±€ì¸ ê²ƒì´ë‹¤. ì´ëŠ” ì±„êµ´ìê°€ ìƒˆë¡œìš´ ë¸”ë¡ì„ ì±„êµ´í•  ë•Œ ë°›ëŠ” ë³´ìƒì´ë‹¤.

ì—¬ëŸ¬ë¶„ë„ ì•Œë“¯ì´ ë¸”ë¡ì²´ì¸ì˜ ì‹œì‘ ë¶€ë¶„ì—ëŠ” ì œë„¤ì‹œìŠ¤ ë¸”ë¡ì´ ìˆë‹¤. ì´ ë¸”ë¡ì´ ë°”ë¡œ ë¸”ë¡ì²´ì¸ì—ì„œ ìµœì´ˆì˜ ì¶œë ¥ì„ ìƒì„±í•˜ëŠ” ë¸”ë¡ì´ë‹¤. ê·¸ë¦¬ê³  ì´ ë¸”ë¡ì—ëŠ” ì´ì „ íŠ¸ëœì­ì…˜ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©°  ê·¸ì— ë”°ë¥¸ ì¶œë ¥ë„ ì—†ê¸° ë•Œë¬¸ì— ì´ì „ ì¶œë ¥ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì„ ë§Œë“¤ì–´ë³´ì.

```go
func NewCoinbaseTX(to, data string) *Transaction {
        if data == "" {
                data = fmt.Sprintf("Reward to '%s'", to)
        }
        txin := TXInput([]byte{}, -1, data)
        txout := TXOutput{subsidy, to}
        tx := Transaction{nil, []TXInput{txin}, []TXOutput{txout}}
        tx.SetID()
        return &tx
}
```

ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì€ ë‹¨ í•˜ë‚˜ì˜ ì…ë ¥ë§Œ ê°€ì§„ë‹¤. ìš°ë¦¬ì˜ êµ¬í˜„ì²´ì—ì„œ ì´ ì…ë ¥ì˜ **Txid**ëŠ” ë¹„ì–´ìˆìœ¼ë©° **Vout**ì€ -1ì´ë‹¤. ë˜í•œ ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì€ **ScriptSig**ì— ì•„ë¬´ ìŠ¤í¬ë¦½íŠ¸ë„ ì €ì¥í•˜ì§€ ì•Šìœ¼ë©° ëŒ€ì‹  ì„ì˜ì˜ ë°ì´í„°ê°€ ì €ì¥ëœë‹¤.

> ë¹„íŠ¸ì½”ì¸ì˜ ìµœì´ˆì˜ ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ê°€ ë‹´ê²¨ìˆë‹¤. "The Times 03/Jan/2009 Chancellor on brink of second bailout for banks". [ì—¬ê¸°ì—ì„œ ì§ì ‘ í™•ì¸í•  ìˆ˜ ìˆë‹¤](https://blockchain.info/tx/4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b?show_adv=true)
**subsidy**ëŠ” ë³´ìƒì˜ ì–‘ì´ë‹¤. ë¹„íŠ¸ì½”ì¸ì—ì„œ ì´ ìˆ«ìëŠ” ê·¸ ì–´ëŠ ê³³ì—ë„ ì €ì¥ë˜ì–´ìˆì§€ ì•Šìœ¼ë©° ì´ ë¸”ë¡ ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°ëœë‹¤. ë¸”ë¡ì˜ ìˆ˜ëŠ” **210000**ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§„ë‹¤. ì œë„¤ì‹œìŠ¤ ë¸”ë¡ì„ ì±„êµ´í•˜ë©´ 50 BTCê°€ ìƒì„±ë˜ë©° ë§¤ **210000** ë¸”ë¡ë§ˆë‹¤ ë³´ìƒì´ ë°˜ìœ¼ë¡œ ì¤„ì–´ë“ ë‹¤. ìš°ë¦¬ëŠ” ì´ ë³´ìƒì„ ìƒìˆ˜ë¡œ ë‘˜ ê²ƒì´ë‹¤ (ì ì–´ë„ ì§€ê¸ˆì€ğŸ˜‰).

## ë¸”ë¡ì²´ì¸ì— íŠ¸ëœì­ì…˜ ì €ì¥í•˜ê¸°

ì§€ê¸ˆë¶€í„° ëª¨ë“  ë¸”ë¡ì€ ì ì–´ë„ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì„ ê°€ì§€ë©° ë” ì´ìƒ íŠ¸ëœì­ì…˜ ì—†ì´ ë¸”ë¡ì„ ì±„êµ´í•˜ëŠ”ê±´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ì´ëŠ” **Block** í•„ë“œì—ì„œ **Data** í•„ë“œë¥¼ ì œê±°í•˜ê³  ëŒ€ì‹  íŠ¸ëœì­ì…˜ì— ì €ì¥í•´ì•¼í•¨ì„ ì˜ë¯¸í•œë‹¤.

```go
type Block struct {
        Timestamp     int64
        Transactions  []*Transaction
        PrevBlockHash []byte
        Hash          []byte
        Nonce         int
}
```

**NewBlock**ê³¼ **NewGenesisBlock**ë„ ìˆ˜ì •í•˜ì.

```go
func NewBlock(transactions []*Transaction, prevBlockHash []byte) *Block {
        block := &Block{time.Now().Unix(), transactions, prevBlockHash, []byte{}, 0}
        ...
}

func NewGenesisBlock(coinbase *Transaction) *Block {
        return NewBlock([]*Transaction{coinbase}, []byte{})
}
```

ë‹¤ìŒìœ¼ë¡œ ìˆ˜ì •í•  ê²ƒì€ ìƒˆë¡œìš´ ë¸”ë¡ì²´ì¸ì„ ë§Œë“œëŠ” í•¨ìˆ˜ì´ë‹¤.

```go
func CreateBlockchain(address string) *Blockchain {
        ...
        err = db.Update(func(tx *bolt.Tx) error {
                cbtx := NewCoinbaseTX(address, genesisCoinbaseData)
                genesis := NewGenesisBlock(cbtx)
                b, err := tx.CreateBucket([]byte(blocksBucket))
                err = b.Put(genesis.Hash, genesis.Serialize())
                ...
        })
        ...
}
```

ì´ì œ í•¨ìˆ˜ëŠ” ì œë„¤ì‹œìŠ¤ ë¸”ë¡ ì±„êµ´ ë³´ìƒì„ ë°›ì„ ì£¼ì†Œë¥¼ ë°›ëŠ”ë‹¤.

## ì‘ì—… ì¦ëª…

ì‘ì—… ì¦ëª… ì•Œê³ ë¦¬ì¦˜ì€ íŠ¸ëœì­ì…˜ ì €ì¥ì†Œì¸ ë¸”ë¡ì²´ì¸ì˜ ì¼ê´€ì„±ê³¼ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë¸”ë¡ì— ì €ì¥ëœ íŠ¸ëœì­ì…˜ì„ ê³ ë ¤í•´ì•¼í•œë‹¤. ë”°ë¼ì„œ **ProofOfWork.prepareData** ë©”ì„œë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•´ì•¼í•œë‹¤.

```go
func (pow *ProofOfWork) prepareData(nonce int) []byte {
        data := bytes.Join(
                [][]byte{
                        pow.block.PrevBlockHash,
                        pow.block.HashTransactions(), // ìˆ˜ì •ëœ ë¶€ë¶„
                        IntToHex(pow.block.Timestamp),
                        IntToHex(int64(targetBits)),
                        IntToHex(int64(nonce)),
                },
                []byte{},
        )

        return data
}
```

ì´ì œ **pow.block.Data** ëŒ€ì‹  **pow.block.HashTransactions()**ë¥¼ ì‚¬ìš©í•œë‹¤.

```go
func (b *Block) HashTransactions() []byte {
        var txHashes [][]byte
        var txHash [32]byte

        for _, tx := range b.Transactions {
                txHashes = append(txHashes, tx.ID)
        }
        txHash = sha256.Sum256(bytes.Join(txHashes, []byte{}))
        return txHash[:]
}
```

ìš°ë¦¬ëŠ” ê³ ìœ í•œ ë°ì´í„°ì˜ í‘œí˜„ì„ ì œê³µí•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ í•´ì‹±ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ìš°ë¦¬ëŠ” ë¸”ë¡ì˜ ëª¨ë“  íŠ¸ëœì­ì…˜ì„ ê³ ìœ í•œ ë‹¨ì¼ í•´ì‹œë¡œ ë§Œë“¤ì–´ ì‹ë³„í•˜ê³ ì‹¶ë‹¤. ì´ë¥¼ ìœ„í•´ ê° íŠ¸ëœì­ì…˜ì˜ í•´ì‹œë“¤ì„ ì—°ê²°í•˜ê³  ì—°ê²°ëœ ë¬¸ìì—´ì˜ í•´ì‹œê°’ì„ ê°€ì ¸ì™€ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

> ë¹„íŠ¸ì½”ì¸ì€ ì¢€ ë” ì •êµí•œ ê¸°ìˆ í•œë‹¤. ë¸”ë¡ì˜ ëª¨ë“  íŠ¸ëœì­ì…˜ì„ [ë¨¸í´ íŠ¸ë¦¬](https://en.wikipedia.org/wiki/Merkle_tree)ë¡œ í‘œí˜„í•˜ë©° ì‘ì—… ì¦ëª… ì‹œìŠ¤í…œì—ì„  ì´ íŠ¸ë¦¬ì˜ ë£¨íŠ¸ í•´ì‹œë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  íŠ¸ëœì­ì…˜ì„ ë‹¤ìš´ë¡œë“œ ë°›ì§€ ì•Šì•„ë„ ë£¨íŠ¸ í•´ì‹œë§Œ ê°€ì§€ê³ ë„ ë¸”ë¡ì— íŠ¹ì • íŠ¸ëœì­ì…˜ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì—¬ê¸°ê¹Œì§€ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

```
$ blockchain_go createblockchain -address Ivan
00000093450837f8b52b78c25f8163bb6137caf43ff4d9a01d1b731fa8ddcc8a

Done!
```

í›Œë¥­í•˜ë‹¤! ìš°ë¦¬ëŠ” ì²« ì±„êµ´ ë³´ìƒì„ ì–»ì—ˆë‹¤. ê·¸ëŸ°ë° ì”ê³ ëŠ” ì–´ë–»ê²Œ í™•ì¸í•  ìˆ˜ ìˆì„ê¹Œ?

## ë¯¸ì‚¬ìš© íŠ¸ëœì­ì…˜ ì¶œë ¥

ìš°ë¦¬ëŠ” ëª¨ë“  ë¯¸ì‚¬ìš© íŠ¸ëœì­ì…˜ ì¶œë ¥ (UTXO)ì„ ì°¾ì•„ì•¼í•œë‹¤. *ë¯¸ì‚¬ìš©*ì´ë€ ê·¸ ì–´ë–¤ ì…ë ¥ì—ì„œë„ ì°¸ì¡°ë˜ì§€ ì•Šì€ ì¶œë ¥ì„ ì˜ë¯¸í•œë‹¤. ìœ„ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ ë¯¸ì‚¬ìš© íŠ¸ëœì­ì…˜ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

1. tx0, output 1;
2. tx1, output 0;
3. tx3, output 0;
4. tx4, output 0.

ë¬¼ë¡ , ì”ê³ ë¥¼ í™•ì¸í•  ë•Œ ëª¨ë“  íŠ¸ëœì­ì…˜ ì¶œë ¥ì´ í•„ìš”í•œê±´ ì•„ë‹ˆë©° ìš°ë¦¬ê°€ ê°€ì§€ê³  ìˆëŠ” í‚¤ë¡œ ì ê¸ˆì„ í•´ì œí•  ìˆ˜ ìˆëŠ” ì¶œë ¥ë§Œ í•„ìš”í•˜ë‹¤ (í˜„ì¬ëŠ” í‚¤ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ì‚¬ìš©ì ì •ì˜ ì£¼ì†Œë¥¼ ëŒ€ì‹  ì‚¬ìš©í•  ê²ƒì´ë‹¤). ìš°ì„  ì…ë ¥ê³¼ ì¶œë ¥ì— ì ê¸ˆ-í•´ì œ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ì.

```go
func (in *TXInput) CanUnlockOutputWith(unlockingData string) bool {
	    return in.ScriptSig == unlockingData
}

func (out *TXOutput) CanBeUnlockedWith(unlockingData string) bool {
    	return out.ScriptPubKey == unlockingData
}
```

ë‹¨ìˆœíˆ ìŠ¤í¬ë¦½íŠ¸ í•„ë“œì™€ **unlockingData**ì„ ë¹„êµí•˜ê³  ìˆë‹¤. ì´ ë¶€ë¶„ì€ ë‚˜ì¤‘ì— ê°œì¸í‚¤ ê¸°ë°˜ì˜ ì£¼ì†Œë¥¼ êµ¬í˜„í•œ ë‹¤ìŒ ê°œì„ í•  ê²ƒì´ë‹¤.

ë‹¤ìŒ ë‹¨ê³„ëŠ” ë¯¸ì‚¬ìš© ì¶œë ¥ì„ í¬í•¨í•˜ëŠ” íŠ¸ëœì­ì…˜ì„ ì°¾ëŠ” ì‘ì—…ì¸ë° ì¡°ê¸ˆ ê¹Œë‹¤ë¡­ë‹¤.

```go
func (bc *Blockchain) FindUnspentTransactions(address string) []Transaction {
    var unspentTXs []Transaction
    spentTXOs := make(map[string][]int)
    bci := bc.Iterator()

    for {
        block := bci.Next()
        for _, tx := range block.Transactions {
            txID := hex.EncodeToString(tx.ID)

        Outputs:
            for outIdx, out := range tx.Vout {
                // ì¶œë ¥ ì‚¬ìš© ì—¬ë¶€ ê²€ì‚¬
                if spentTXOs[txID] != nil {
                    for _, spentOut := range spentTXOs[txID] {
                        if spentOut == outIdx {
                            continue Outputs
                        }
                    }
                }
                if out.CanBeUnlockedWith(address) {
                    unspentTXs = append(unspentTXs, *tx)
                }
            }

            if tx.IsCoinbase() == false {
                for _, in := range tx.Vin {
                    if in.CanUnlockOutputWith(address) {
                        inTxID := hex.EncodeToString(in.Txid)
                        spentTXOs[inTxID] = append(spentTXOs[inTxID], in.Vout)
                    }
                }
            }
        }
    }
}
```

íŠ¸ëœì­ì…˜ì€ ë¸”ë¡ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ë¸”ë¡ì²´ì¸ì˜ ëª¨ë“  ë¸”ë¡ì„ ê²€ì‚¬í•´ì•¼í•œë‹¤.

ì¶œë ¥ë¶€í„° ì‹œì‘í•˜ì.

```go
if out.CanBeUnlockedWith(address) {
    	unspentTXs = append(unspentTXs, tx)
}
```

ì–´ë–¤ ì¶œë ¥ì´ ìš°ë¦¬ê°€ ì°¾ê³  ìˆëŠ” ë¯¸ì‚¬ìš© íŠ¸ëœì­ì…˜ì˜ ì¶œë ¥ê³¼ ë™ì¼í•œ ì£¼ì†Œë¡œ ì ê¶ˆì ¸ìˆë‹¤ë©´ ì´ ì¶œë ¥ì´ ë°”ë¡œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì¶œë ¥ì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì¶œë ¥ì„ ê°€ì ¸ì˜¤ê¸° ì „ì— ë¨¼ì € ì´ ì¶œë ¥ì´ ì…ë ¥ì—ì„œ ì´ë¯¸ ì°¸ì¡°ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  í•„ìš”ê°€ ìˆë‹¤.

```go
if spentTXOs[txID] != nil {
        for _, spentOut := range spentTXOs[txID] {
                if spentOut == outIdx {
                        continue Outputs
                }
        }
}
```

ì…ë ¥ì—ì„œ ì´ë¯¸ ì°¸ì¡°ëœ ì¶œë ¥ë“¤ì€ ë¬´ì‹œí•œë‹¤ (ì´ ì¶œë ¥ë“¤ì˜ ê°’ë“¤ì€ ë‹¤ë¥¸ ì¶œë ¥ìœ¼ë¡œ ì´ë™í–ˆê¸° ë•Œë¬¸ì— ì¹´ìš´íŠ¸ í•  ìˆ˜ ì—†ë‹¤). ì¶œë ¥ ê²€ì‚¬ê°€ ëë‚˜ë©´ ì£¼ì–´ì§„ ì£¼ì†Œë¡œ ì ê¸´ ì¶œë ¥ì„ í•´ì œí•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì…ë ¥ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤ (ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì€ ì¶œë ¥ì„ í•´ì œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì œì™¸í•œë‹¤).

```go
if tx.IsCoinbase() == false {
        for _, in := range tx.Vin {
                if in.CanUnlockOutputWith(address) {
                        inTxID := hex.EncodeToString(in.Txid)
                        spentTXOs[inTxID] = append(spentTXOs[inTxID], in.Vout)
                }
        }
}
```

ìœ„ í•¨ìˆ˜ëŠ” ë¯¸ì‚¬ìš© ì¶œë ¥ì„ í¬í•¨í•˜ê³  ìˆëŠ” íŠ¸ëœì­ì…˜ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤. ì”ê³  ê³„ì‚°ì„ ìœ„í•´ì„  íŠ¸ëœì­ì…˜ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì¶œë ¥ë“¤ë§Œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ê°€ í•˜ë‚˜ ë” í•„ìš”í•˜ë‹¤.

```go
func (bc *Blockchain) FindUTXO(address string) []TXOutput {
        var UTXOs []TXOutput
        unspentTransactions := bc.FindUnspentTransactions(address)
        for _, tx := range unspentTransactions {
                for _, out := range tx.Vout {
                        if out.CanBeUnlockedWith(address) {
                                UTXOs = append(UTXOs, out)
                        }
                }
        }
        return UTXOs
}
```

ë‹¤ ëë‹¤! ì´ì œ **getbalance** ì»¤ë§¨ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```go
func (cli *CLI) getBalance(address string) {
        bc := NewBlockchain(address)
        defer bc.db.Close()

        balance := 0
        UTXOs := bc.FindUTXO(address)

        for _, out := range UTXOs {
                balance += out.Value
        }
        fmt.Printf("Balance of '%s': %d\n", address, balance)
}
```

ê³„ì¢Œ ì”ê³ ëŠ” ê³„ì¢Œ ì£¼ì†Œë¡œ ì ê¸´ ëª¨ë“  ë¯¸ì‚¬ìš© íŠ¸ëœì­ì…˜ ì¶œë ¥ê°’ì˜ í•©ì´ë‹¤.

ì œë„¤ì‹œìŠ¤ ë¸”ë¡ ì±„êµ´í›„ ì”ê³ ë¥¼ í™•ì¸í•´ë³´ì.

```
$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 10
```

ìš°ë¦¬ì˜ ì²« ìì‚°ì´ë‹¤!

## ì½”ì¸ ì „ì†¡

ì´ì œ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì½”ì¸ì„ ì „ì†¡í•´ë³´ì. ì´ë¥¼ ìœ„í•´ì„  ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ìƒì„±í•˜ì—¬ ë¸”ë¡ì— ë„£ê³  ë¸”ë¡ì„ ì±„êµ´í•´ì•¼í•œë‹¤. ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ëŠ” íŠ¹ìˆ˜í•œ íƒ€ì…ì˜ íŠ¸ëœì­ì…˜ì¸ ì½”ì¸ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ë§Œ êµ¬í˜„í–ˆìœ¼ë‹ˆ ì´ì œ ì¼ë°˜ íŠ¸ëœì­ì…˜ì„ êµ¬í˜„í•´ë³´ì.

```go
func NewUTXOTransaction(from, to string, amount int, bc *Blockchain) *Transaction {
        var inputs []TXInput
        var outputs []TXOutput

        acc, validOutputs := bc.FindSpendableOutputs(from, amount)

        if acc < amount {
                log.Panic("ERRPR: NOt enough funds)
        }

        // ì…ë ¥ ë¦¬ìŠ¤íŠ¸ ìƒì„±
        for txid, outs := range validOutputs {
                txID, err := hex.DecodeString(txid)

                for _, out := outs {
                        input := TXInput{txID, out, from}
                        inputs := append(inputs, input)
                }
        }

        // ì¶œë ¥ ë¦¬ìŠ¤íŠ¸ ìƒì„±
        outputs = append(outputs, TXOutput{amount, to})
        if acc > amount {
                outputs = append(outputs, TXOutput{acc - amount, from})
        }

        tx := Transaction{nil, inputs, outputs}
        tx.SetID()
        return &tx
}
```

ìƒˆë¡œìš´ ì¶œë ¥ì„ ìƒì„±í•˜ê¸° ì „ì—, ìš°ì„  ëª¨ë“  ë¯¸ì‚¬ìš© ì¶œë ¥ì„ ì°¾ì•„ ì¶©ë¶„í•œ ì”ê³ ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•´ì•¼í•œë‹¤. ì´ê²ƒì´ **FindSpendableOutputs** ë©”ì„œë“œê°€ í•˜ëŠ” ì¼ì´ë‹¤. í™•ì¸ì´ ëë‚˜ë©´ ì°¾ì•„ë‚¸ ê°ê°ì˜ ì¶œë ¥ì— ëŒ€í•´ ì´ë¥¼ ì°¸ì¡°í•˜ëŠ” ì…ë ¥ë“¤ì´ ìƒì„±ëœë‹¤. ê·¸ í›„ì—” ë‹¤ìŒ ë‘ ê°œì˜ ì¶œë ¥ì„ ìƒì„±í•œë‹¤.

1. ìˆ˜ì‹ ì ì£¼ì†Œë¡œ ì ê·¼ ì¶œë ¥. ì‹¤ì œë¡œ ë‹¤ë¥¸ ì£¼ì†Œë¡œ ì½”ì¸ì„ ì „ì†¡í•˜ëŠ” ì¶œë ¥ì´ë‹¤.
2. ë°œì‹ ì ì£¼ì†Œë¡œ ì ê·¼ ì¶œë ¥. ì´ëŠ” ì”ì•¡ì¸ë°, ë¯¸ì‚¬ìš© ì¶œë ¥ë“¤ì˜ ë³´ìœ ëŸ‰ì´ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì—ì„œ í•„ìš”í•œ ê°’ë³´ë‹¤ í° ê²½ìš°ì—ë§Œ ë§Œë“¤ì–´ì§„ë‹¤. ì¶œë ¥ì€ **ë‚˜ëˆ ì§ˆ ìˆ˜ ì—†ìŒ**ì„ ê¸°ì–µí•˜ë¼.

**FindSpendableOutputs** ë©”ì„œë“œëŠ” ì´ì „ì— ì •ì˜í•œ **FindUspentTransactions**ì„ ê¸°ë°˜ìœ¼ë¡œí•œë‹¤.

```go
func (bc *Blockchain) FindSpendableOutputs(address string, amount int) (int, map[string][]int) {
        unspentOutputs := make(map[string][]int)
        unspentTXs := bc.FindUnspentTransactions(address)
        accumulated := 0

Work:
        for _, tx := range unspentTXs {
                txID := hex.EncodeToString(tx.ID)

                for outIdx, out := range tx.Vout {
                        if out.CanBeUnlockedWith(address) && accumulated < amount {
                                accumulated += out.Value
                                unspentOutputs[txID] = append(unspentOutputs[txID], outIdx)
                        }

                        if accumulated >= amount {
                                break Work
                        }
                }
        }

        return accumulated, unspentOutputs
}
```

ì´ ë©”ì„œë“œëŠ” ëª¨ë“  ë¯¸ì‚¬ìš© íŠ¸ëœì­ì…˜ì„ ìˆœíšŒí•˜ë©´ì„œ ê°’ì„ ëˆ„ì í•œë‹¤. ëˆ„ì ê°’ì´ ì „ì†¡í•˜ë ¤ëŠ” ì–‘ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ìœ¼ë©´ ìˆœíšŒë¥¼ ëë‚´ê³  ëˆ„ì ëœ ê°’ê³¼ íŠ¸ëœì­ì…˜ ì•„ì´ë””ë¡œ ê·¸ë£¹í•‘ëœ ì¶œë ¥ì„ ë°˜í™˜í•œë‹¤. í•„ìš”í•œ ì–‘ë³´ë‹¤ ë§ì€ ì–‘ì„ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ë‹¤.

ì´ì œ **Blockchain.MineBlock** ë©”ì„œë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

```go
func (bc *Blockchain) MineBlock(transactions []*Transaction) {
        ...
        newBlock := NewBlock(transactions, lastHash)
        ...
}
```

ë§ˆì§€ë§‰ìœ¼ë¡œ **send** ì»¤ë§¨ë“œë¥¼ êµ¬í˜„í•´ë³´ì.

```go
func (cli *CLI) send(from, to string, amount int) {
        bc := NewBlockchain(from)
        defer bc.db.Close()

        tx := NewUTXOTransaction(from, to, amount, bc)
        bc.MineBlock([]*Transaction{tx})
        fmt.Println("Success!")
}
```

ì½”ì¸ì„ ì „ì†¡í•œë‹¤ëŠ”ê±´ íŠ¸ëœì­ì…˜ì„ ë§Œë“¤ê³  ë¸”ë¡ ì±„êµ´ì„ í†µí•´ ì´ë¥¼ ë¸”ë¡ì²´ì¸ì— ì¶”ê°€í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê·¸ëŸ¬ë‚˜ ë¹„íŠ¸ì½”ì¸ì€ ìš°ë¦¬ê°€ êµ¬í˜„í•œ ê²ƒì²˜ëŸ¼ ì´ ì‘ì—…ì„ ì¦‰ì‹œ ìˆ˜í–‰í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ëŒ€ì‹  ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ë“¤ì„ ë©”ëª¨ë¦¬í’€ì— ë„£ê³  ì±„êµ´ìê°€ ì±„êµ´í•  ì¤€ë¹„ê°€ ë˜ë©´ ë©”ëª¨ë¦¬í’€ì—ì„œ ëª¨ë“  íŠ¸ëœì­ì…˜ì„ ê°€ì ¸ì™€ í›„ë³´ ë¸”ë¡ì„ ìƒì„±í•œë‹¤. íŠ¸ëœì­ì…˜ì€ ì´ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ë¸”ë¡ì´ ì±„êµ´ë˜ê³  ë¸”ë¡ì²´ì¸ì— ì¶”ê°€ë  ë•Œì—ë§Œ ì»¨íŒì„ ë°›ê²Œ ëœë‹¤.

ì½”ì¸ ì „ì†¡ ê¸°ëŠ¥ì´ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

```
$ blockchain_go send -from Ivan -to Pedro -amount 6
00000001b56d60f86f72ab2a59fadb197d767b97d4873732be505e0a65cc1e37

Success!

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 4

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 6
```

ì˜ ë™ì‘í•œë‹¤! ì´ì œ ë” ë§ì€ íŠ¸ëœì­ì…˜ì„ ìƒì„±í•˜ê³  ì—¬ëŸ¬ ì¶œë ¥ì—ì„œ ì „ì†¡ì´ ì˜ ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

```
$ blockchain_go send -from Pedro -to Helen -amount 2
00000099938725eb2c7730844b3cd40209d46bce2c2af9d87c2b7611fe9d5bdf

Success!

$ blockchain_go send -from Ivan -to Helen -amount 2
000000a2edf94334b1d94f98d22d7e4c973261660397dc7340464f7959a7a9aa

Success!
```

ì´ì œ Helenì˜ ì½”ì¸ì€ ë‘ ì¶œë ¥ì— ì˜í•´ ì ê¶ˆì¡Œë‹¤. í•˜ë‚˜ëŠ” Pedro, ë˜ í•˜ë‚˜ëŠ” Ivanì´ ìƒì„±í•œ íŠ¸ëœì­ì…˜ì´ë‹¤. Helenì˜ ì½”ì¸ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì „ì†¡í•´ë³´ì.

```
$ blockchain_go send -from Helen -to Rachel -amount 3
000000c58136cffa669e767b8f881d16e2ede3974d71df43058baaf8c069f1a0

Success!

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 2

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 4

$ blockchain_go getbalance -address Helen
Balance of 'Helen': 1

$ blockchain_go getbalance -address Rachel
Balance of 'Rachel': 3
```

ì˜ ë™ì‘í•œë‹¤! ì „ì†¡ ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ë„ í•´ë³´ì.

```
$ blockchain_go send -from Pedro -to Ivan -amount 5
panic: ERROR: Not enough funds

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 4

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 2
```

## ê²°ë¡ 

ì‰½ì§€ ì•Šì€ ì—¬ì •ì´ì—ˆì§€ë§Œ ìš°ë¦¬ëŠ” ì´ì œ íŠ¸ëœì­ì…˜ì„ ê°–ê²Œë˜ì—ˆë‹¤. í•˜ì§€ë§Œ ì•„ì§ ë¹„íŠ¸ì½”ì¸ê³¼ ê°™ì€ ì•”í˜¸í™” í™”íë“¤ì´ ê°–ê³ ìˆëŠ” ì¼ë¶€ ì¤‘ìš”í•œ í•µì‹¬ ê¸°ëŠ¥ë“¤ì´ ë¹ ì ¸ìˆë‹¤.

1. ì£¼ì†Œ. ìš°ë¦¬ì—ê² ì•„ì§ ì‹¤ì œ ê°œì¸í‚¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì£¼ì†Œê°€ ì—†ë‹¤.
2. ë³´ìƒ. ë¸”ë¡ ì±„êµ´ì— ëŒ€í•œ ë³´ìƒì„ ëª»ë°›ê³  ìˆë‹¤.
3. UTXO ì§‘í•©. ì§€ê¸ˆì€ ì”ê³  ê³„ì‚°ì„ ìœ„í•´ ëª¨ë“  ë¸”ë™ì²´ì¸ì„ ìŠ¤ìº”í•˜ê³  ìˆëŠ”ë°, ì´ëŠ” ë¸”ë¡ì´ ë§ì•„ì§ˆìˆ˜ë¡ ë§¤ìš° ì˜¤ë˜ ê±¸ë¦´ìˆ˜ ìˆë‹¤. ë˜í•œ ìµœê·¼ì— ìƒì„±ëœ íŠ¸ëœì­ì…˜ì— ëŒ€í•œ ê²€ì¦ ì‘ì—…ì—ë„ ì•„ì£¼ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆë‹¤. UTXO ì§‘í•©ì€ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  íŠ¸ëœì­ì…˜ ê´€ë ¨ ì—°ì‚°ì„ ë¹ ë¥´ê²Œ ë§Œë“¤ì–´ì¤€ë‹¤.
4. Mempool. Mempoolì€ íŠ¸ëœì­ì…˜ì´ ë¸”ë¡ì— í¬í•¨ë˜ê¸° ì „ê¹Œì§€ ì €ì¥ë˜ëŠ” ì¥ì†Œì´ë‹¤. ìš°ë¦¬ê°€ êµ¬í˜„í•œ ë¸”ë¡ì²´ì¸ì—ì„  í•œ ë¸”ë¡ì´ ë‹¨ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ë§Œ í¬í•¨í•˜ëŠ”ë°, ì´ëŠ” ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë‹¤.
